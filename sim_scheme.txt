
【产品名称】
前置仓骑手配送仿真系统 PRD（产品需求文档）

【产品目标】
为生鲜即时配送行业提供一个可复现、可扩展的骑手分派仿真平台，支持多种调度策略、骑手行为建模、订单时效分析，辅助前置仓布局和运力优化。

【核心功能模块】
1. 事件驱动仿真引擎
	- 以分钟为单位推进，支持骑手、订单、调度等多种事件。
2. 骑手管理
	- 支持骑手上线/下线、星级、背单容量、状态流转（空闲/分派/配送/回店/离线）。
3. 订单管理
	- 支持即时单/预约单，时间窗、空间分布、状态流转（创建/到达/分派/配送/完成/取消）。
4. 调度与分派
	- 支持 OR-Tools VRPTW、贪心启发式等算法，考虑时间窗、背单容量、骑手状态。
5. 路径规划与时效计算
	- 实时计算骑手配送路径与预计送达时间。
6. 数据输出与分析
	- 输出订单准时率、提前/超时送达率、骑手利用率、平均配送时长/距离等 KPI。

【用户流程】
1. 配置骑手参数（数量、星级、上线时间、背单容量等）。
2. 配置订单生成规则（到达率、空间分布、时间窗等）。
3. 启动仿真，系统自动推进事件、分派订单、记录状态。
4. 实时/事后查看日志与 KPI 数据，辅助运营决策。

【核心算法说明】
- 调度轮次：每分钟触发，处理新到订单和未分派订单。
- 分派逻辑：优先分派给空闲且在线骑手，考虑背单上限和时间窗。
- 路径规划：骑手每批订单按最优路径顺序配送，动态计算预计送达时间。
- 状态机：骑手状态自动流转，订单状态随事件推进。
- 风险评估：结合骑手速度、订单距离、时间窗，动态评估超时风险。

【数据输出与分析】
- 订单准时率、提前送达率、超时送达率
- 骑手利用率、平均配送时长、平均驻店时长
- 平均配送距离、订单分布热力图
- 日志文件 simulation.log 记录所有关键事件

【扩展性与定制化】
- 支持自定义调度算法、骑手行为、订单生成模型
- 可集成真实地图、交通仿真、多仓协同等高级功能
- 支持 API/脚本批量仿真，便于大规模参数敏感性分析

【非功能需求】
- 支持 Python3，模块化架构，易于二次开发
- 日志与测试覆盖，保证结果可复现

【上线与运维建议】
- 可部署于本地或云端，支持批量仿真与结果导出
- 建议结合实际业务数据进行参数校准

【版本迭代方向】
- 增加骑手智能上下线策略、动态运力调度
- 支持多仓协同、跨仓分派
- 集成地图与交通仿真，提升时效预测精度